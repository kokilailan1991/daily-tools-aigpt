<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Calculator - Daily Tools</title>
    
    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Razorpay Checkout CDN -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <style>
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 0;
        }
        
        .calculator-card {
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 15px;
            border: none;
        }
        
        .risk-card {
            transition: transform 0.3s ease;
            cursor: pointer;
        }
        
        .risk-card:hover {
            transform: translateY(-5px);
        }
        
        .risk-low {
            border-left: 5px solid #28a745;
        }
        
        .risk-medium {
            border-left: 5px solid #ffc107;
        }
        
        .risk-high {
            border-left: 5px solid #dc3545;
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
        }
        
        .premium-feature {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .social-share-btn {
            margin: 5px;
            transition: transform 0.2s ease;
        }
        
        .social-share-btn:hover {
            transform: scale(1.1);
        }
        
        .whatsapp { background-color: #25D366; color: white; }
        .linkedin { background-color: #0077B5; color: white; }
        .twitter { background-color: #1DA1F2; color: white; }
        
        .hidden {
            display: none;
        }
        
        .goal-message {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <div class="hero-section text-center">
        <div class="container">
            <h1 class="display-4 fw-bold mb-3">
                <i class="fas fa-calculator me-3"></i>Risk Calculator
            </h1>
            <p class="lead">Calculate your investment returns based on age-appropriate risk allocation</p>
        </div>
    </div>

    <div class="container my-5">
        <!-- Navigation Tabs -->
        <ul class="nav nav-tabs justify-content-center mb-4" id="calculatorTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button" role="tab">
                    <i class="fas fa-calculator me-2"></i>Basic Calculator
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="premium-tab" data-bs-toggle="tab" data-bs-target="#premium" type="button" role="tab">
                    <i class="fas fa-crown me-2"></i>Premium Planner
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="calculatorTabContent">
            <!-- Basic Calculator Tab -->
            <div class="tab-pane fade show active" id="basic" role="tabpanel">
                <div class="row">
                    <!-- Input Form -->
                    <div class="col-lg-4">
                        <div class="card calculator-card">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0"><i class="fas fa-edit me-2"></i>Investment Details</h5>
                            </div>
                            <div class="card-body">
                                <form id="calculatorForm">
                                    <div class="mb-3">
                                        <label for="age" class="form-label">Age</label>
                                        <input type="number" class="form-control" id="age" min="18" max="80" required>
                                        <div class="form-text">Your current age determines risk allocation</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="lumpSum" class="form-label">Lump Sum Investment (â‚¹)</label>
                                        <input type="number" class="form-control" id="lumpSum" min="0" required>
                                        <div class="form-text">One-time investment amount</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="monthlySavings" class="form-label">Monthly Savings (â‚¹)</label>
                                        <input type="number" class="form-control" id="monthlySavings" min="0" required>
                                        <div class="form-text">Amount you can save monthly</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="goalAmount" class="form-label">Goal Amount (â‚¹) - Optional</label>
                                        <input type="number" class="form-control" id="goalAmount" min="0">
                                        <div class="form-text">Your financial goal (leave empty if not applicable)</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="investmentYears" class="form-label">Investment Period (Years)</label>
                                        <input type="number" class="form-control" id="investmentYears" min="1" max="50" value="10" required>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-calculator me-2"></i>Calculate Returns
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Results -->
                    <div class="col-lg-8">
                        <!-- Risk Allocation Display -->
                        <div id="riskAllocation" class="hidden">
                            <div class="card calculator-card mb-4">
                                <div class="card-header bg-info text-white">
                                    <h5 class="mb-0"><i class="fas fa-chart-pie me-2"></i>Risk Allocation</h5>
                                </div>
                                <div class="card-body">
                                    <div id="riskAllocationContent"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Returns Cards -->
                        <div id="returnsCards" class="hidden">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card risk-card risk-low mb-3">
                                        <div class="card-header bg-success text-white">
                                            <h6 class="mb-0"><i class="fas fa-shield-alt me-2"></i>Low Risk</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="lowRiskReturns"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card risk-card risk-medium mb-3">
                                        <div class="card-header bg-warning text-dark">
                                            <h6 class="mb-0"><i class="fas fa-balance-scale me-2"></i>Medium Risk</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="mediumRiskReturns"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card risk-card risk-high mb-3">
                                        <div class="card-header bg-danger text-white">
                                            <h6 class="mb-0"><i class="fas fa-rocket me-2"></i>High Risk</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="highRiskReturns"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Chart -->
                        <div id="chartSection" class="hidden">
                            <div class="card calculator-card">
                                <div class="card-header bg-secondary text-white">
                                    <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Returns Comparison</h5>
                                </div>
                                <div class="card-body">
                                    <div class="chart-container">
                                        <canvas id="returnsChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Goal Message -->
                        <div id="goalMessage" class="hidden">
                            <div class="goal-message text-center">
                                <h5><i class="fas fa-target me-2"></i>Goal Analysis</h5>
                                <p id="goalMessageContent" class="mb-0"></p>
                            </div>
                        </div>

                        <!-- Social Sharing -->
                        <div id="socialSharing" class="hidden text-center mt-4">
                            <h6>Share your results:</h6>
                            <button class="btn btn-success social-share-btn whatsapp" onclick="shareToWhatsApp()">
                                <i class="fab fa-whatsapp me-2"></i>WhatsApp
                            </button>
                            <button class="btn btn-primary social-share-btn linkedin" onclick="shareToLinkedIn()">
                                <i class="fab fa-linkedin me-2"></i>LinkedIn
                            </button>
                            <button class="btn btn-info social-share-btn twitter" onclick="shareToTwitter()">
                                <i class="fab fa-twitter me-2"></i>Twitter
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Premium Planner Tab -->
            <div class="tab-pane fade" id="premium" role="tabpanel">
                <div class="premium-feature text-center">
                    <h3><i class="fas fa-crown me-2"></i>Premium Planner</h3>
                    <p class="lead">Unlock advanced features for comprehensive financial planning</p>
                    
                    <div class="row justify-content-center">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Premium Features Include:</h5>
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>Multiple scenario planning</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Personalized PDF reports</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Advanced goal tracking</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Portfolio rebalancing alerts</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Tax optimization suggestions</li>
                                    </ul>
                                    
                                    <div class="mt-4">
                                        <h4 class="text-primary">â‚¹299 <small class="text-muted">one-time</small></h4>
                                        <button class="btn btn-warning btn-lg" onclick="unlockPremium()">
                                            <i class="fas fa-unlock me-2"></i>Unlock Premium Planner
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Global variables
        let currentResults = {};
        let chartInstance = null;

        // Risk allocation based on age
        const riskAllocations = {
            high: { equity: 70, debt: 20, gold: 10, expectedReturn: 12 },
            medium: { equity: 50, debt: 30, gold: 20, expectedReturn: 10 },
            low: { equity: 30, debt: 50, gold: 20, expectedReturn: 8 }
        };

        // Form submission handler
        document.getElementById('calculatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateReturns();
        });

        function calculateReturns() {
            // Get form values
            const age = parseInt(document.getElementById('age').value);
            const lumpSum = parseFloat(document.getElementById('lumpSum').value);
            const monthlySavings = parseFloat(document.getElementById('monthlySavings').value);
            const goalAmount = parseFloat(document.getElementById('goalAmount').value) || null;
            const investmentYears = parseInt(document.getElementById('investmentYears').value);

            // Determine risk profile based on age
            let riskProfile;
            if (age < 30) {
                riskProfile = 'high';
            } else if (age >= 30 && age <= 45) {
                riskProfile = 'medium';
            } else {
                riskProfile = 'low';
            }

            // Calculate returns for all risk profiles
            const results = {};
            
            Object.keys(riskAllocations).forEach(risk => {
                const allocation = riskAllocations[risk];
                const annualReturn = allocation.expectedReturn / 100;
                
                // Lump sum calculation (Compound Interest: A = P(1 + r)^t)
                const lumpSumReturn = lumpSum * Math.pow(1 + annualReturn, investmentYears);
                
                // SIP calculation (Future Value of Annuity)
                const monthlyReturn = annualReturn / 12;
                const sipReturn = monthlySavings * (((Math.pow(1 + monthlyReturn, investmentYears * 12) - 1) / monthlyReturn) * (1 + monthlyReturn));
                
                // Total return
                const totalReturn = lumpSumReturn + sipReturn;
                
                results[risk] = {
                    allocation: allocation,
                    lumpSumReturn: lumpSumReturn,
                    sipReturn: sipReturn,
                    totalReturn: totalReturn,
                    riskProfile: risk
                };
            }

            currentResults = results;

            // Display results
            displayRiskAllocation(riskProfile);
            displayReturns(results);
            displayChart(results);
            displayGoalMessage(goalAmount, results[riskProfile].totalReturn, monthlySavings);
            showSocialSharing();

            // Store results for sharing
            window.calculatorResults = results;
        }

        function displayRiskAllocation(riskProfile) {
            const allocation = riskAllocations[riskProfile];
            const riskName = riskProfile.charAt(0).toUpperCase() + riskProfile.slice(1);
            
            document.getElementById('riskAllocationContent').innerHTML = `
                <div class="alert alert-info">
                    <h6><i class="fas fa-user me-2"></i>Your Risk Profile: ${riskName} Risk</h6>
                    <div class="row mt-3">
                        <div class="col-4">
                            <div class="text-center">
                                <div class="h4 text-primary">${allocation.equity}%</div>
                                <small>Equity</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center">
                                <div class="h4 text-success">${allocation.debt}%</div>
                                <small>Debt</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center">
                                <div class="h4 text-warning">${allocation.gold}%</div>
                                <small>Gold</small>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 text-center">
                        <small class="text-muted">Expected Annual Return: ${allocation.expectedReturn}%</small>
                    </div>
                </div>
            `;
            
            document.getElementById('riskAllocation').classList.remove('hidden');
        }

        function displayReturns(results) {
            Object.keys(results).forEach(risk => {
                const result = results[risk];
                const elementId = risk + 'RiskReturns';
                
                document.getElementById(elementId).innerHTML = `
                    <div class="text-center">
                        <div class="h5 text-primary">â‚¹${formatNumber(result.totalReturn)}</div>
                        <small class="text-muted">Total Value</small>
                        <hr>
                        <div class="row">
                            <div class="col-6">
                                <small>Lump Sum</small>
                                <div class="fw-bold">â‚¹${formatNumber(result.lumpSumReturn)}</div>
                            </div>
                            <div class="col-6">
                                <small>SIP</small>
                                <div class="fw-bold">â‚¹${formatNumber(result.sipReturn)}</div>
                            </div>
                        </div>
                        <hr>
                        <small class="text-success">Expected Return: ${result.allocation.expectedReturn}%</small>
                    </div>
                `;
            });
            
            document.getElementById('returnsCards').classList.remove('hidden');
        }

        function displayChart(results) {
            const ctx = document.getElementById('returnsChart').getContext('2d');
            
            // Destroy existing chart
            if (chartInstance) {
                chartInstance.destroy();
            }

            const labels = Object.keys(results).map(risk => 
                risk.charAt(0).toUpperCase() + risk.slice(1) + ' Risk'
            );
            
            const lumpSumData = Object.values(results).map(result => result.lumpSumReturn);
            const sipData = Object.values(results).map(result => result.sipReturn);
            const totalData = Object.values(results).map(result => result.totalReturn);

            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Lump Sum Return',
                        data: lumpSumData,
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }, {
                        label: 'SIP Return',
                        data: sipData,
                        backgroundColor: 'rgba(255, 99, 132, 0.8)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }, {
                        label: 'Total Return',
                        data: totalData,
                        backgroundColor: 'rgba(75, 192, 192, 0.8)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return 'â‚¹' + formatNumber(value);
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': â‚¹' + formatNumber(context.parsed.y);
                                }
                            }
                        }
                    }
                }
            });
            
            document.getElementById('chartSection').classList.remove('hidden');
        }

        function displayGoalMessage(goalAmount, totalReturn, monthlySavings) {
            if (!goalAmount) return;
            
            const shortfall = goalAmount - totalReturn;
            let message;
            
            if (shortfall <= 0) {
                const surplus = Math.abs(shortfall);
                message = `ðŸŽ‰ Congratulations! You'll exceed your goal by â‚¹${formatNumber(surplus)}`;
            } else {
                const requiredMonthlySavings = monthlySavings * (1 + (shortfall / totalReturn));
                message = `To reach your goal of â‚¹${formatNumber(goalAmount)}, you need to save â‚¹${formatNumber(requiredMonthlySavings)} per month (currently saving â‚¹${formatNumber(monthlySavings)})`;
            }
            
            document.getElementById('goalMessageContent').innerHTML = message;
            document.getElementById('goalMessage').classList.remove('hidden');
        }

        function showSocialSharing() {
            document.getElementById('socialSharing').classList.remove('hidden');
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('en-IN', {
                maximumFractionDigits: 0
            }).format(num);
        }

        // Social sharing functions
        function shareToWhatsApp() {
            const text = `Check out my investment returns calculated using the Risk Calculator! Total return: â‚¹${formatNumber(currentResults.low?.totalReturn || 0)}`;
            const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        function shareToLinkedIn() {
            const text = `Just used the Risk Calculator to plan my investments. Great tool for financial planning!`;
            const url = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}`;
            window.open(url, '_blank');
        }

        function shareToTwitter() {
            const text = `Calculated my investment returns with the Risk Calculator! #InvestmentPlanning #FinancialPlanning`;
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }

        // Razorpay integration for premium features
        function unlockPremium() {
            const options = {
                "key": "rzp_test_1234567890abcdef", // Replace with your actual Razorpay test key
                "amount": "29900", // â‚¹299 in paise
                "currency": "INR",
                "name": "Daily Tools",
                "description": "Premium Risk Calculator",
                "image": "https://via.placeholder.com/150",
                "order_id": "", // This will be generated by your backend
                "handler": function (response) {
                    alert("Payment successful! Premium features unlocked.");
                    // Here you would typically make an API call to your backend to verify the payment
                    // and unlock premium features for the user
                    unlockPremiumFeatures();
                },
                "prefill": {
                    "name": "User Name", // You can get this from your form
                    "email": "user@example.com",
                    "contact": "9999999999"
                },
                "notes": {
                    "address": "Razorpay Corporate Office"
                },
                "theme": {
                    "color": "#3399cc"
                }
            };
            
            const rzp = new Razorpay(options);
            rzp.on('payment.failed', function (response) {
                alert("Payment failed. Please try again.");
            });
            rzp.open();
        }

        function unlockPremiumFeatures() {
            // Add premium features here
            document.getElementById('premium-tab').innerHTML = '<i class="fas fa-crown me-2"></i>Premium Planner <span class="badge bg-success ms-2">Unlocked</span>';
            
            // Example: Enable advanced features
            alert("Premium features unlocked! You now have access to:\n- Multiple scenario planning\n- PDF report generation\n- Advanced goal tracking");
        }

        // Initialize tooltips
        document.addEventListener('DOMContentLoaded', function() {
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>
</body>
</html>
